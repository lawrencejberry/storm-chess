{"version":3,"sources":["images/lightning.png","logic/squares.js","logic/StormChess.js","components/Board.js","components/Panel.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","BaseChess","Chess","stormTurns","StormChess","stormLevel","gameOver","liveSquares","squares","zappedSquares","turn","game_over","half_moves","numLegalMoves","i","length","moves","in_checkmate","in_stalemate","insufficient_material","square","stormMoves","playableSquares","slice","Math","floor","starter","splice","some","s","piece","get","type","color","baseMoves","verbose","baseMove","includes","to","push","__proto__","move","sourceSquare","targetSquare","movingSide","promotionLevel","from","promotion","toString","remove","put","removeCount","zap","status","playerToMove","reset","possibleMoveStyle","background","borderRadius","zappedSquareStyle","opacity","lightningSquareStyle","backgroundImage","lightningImage","backgroundSize","game","Board","useState","setStatus","position","setPosition","orientation","setOrientation","autoFlipOn","setAutoFlipOn","possibleMoves","setPossibleMoves","lightningSquares","setLightningSquares","squareStyles","Object","fromEntries","map","possibleMove","zappedSquare","lightningSquare","useEffect","setTimeout","flex","flexDirection","justifyContent","onMouseOverSquare","onMouseOutSquare","onDrop","fen","Panel","resetBoard","turnsUntilNextStorm","turnsBetweenStorms","width","marginX","padding","isNaN","marginBottom","progress","bg","theme","colors","blue","alignItems","marginY","id","name","checked","onClick","display","App","fontSize","margin","textAlign","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.09353e26.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/lightning.7b2c75a9.png\";","// The board squares ordered by how soon they get removed\nexport default [\n  \"a1\",\n  \"a2\",\n  \"a3\",\n  \"a4\",\n  \"a5\",\n  \"a6\",\n  \"a7\",\n  \"a8\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"h7\",\n  \"h8\",\n  \"b1\",\n  \"c1\",\n  \"d1\",\n  \"e1\",\n  \"f1\",\n  \"g1\",\n  \"b8\",\n  \"c8\",\n  \"d8\",\n  \"e8\",\n  \"f8\",\n  \"g8\",\n  \"b2\",\n  \"b3\",\n  \"b4\",\n  \"b5\",\n  \"b6\",\n  \"b7\",\n  \"g2\",\n  \"g3\",\n  \"g4\",\n  \"g5\",\n  \"g6\",\n  \"g7\",\n  \"c2\",\n  \"d2\",\n  \"e2\",\n  \"f2\",\n  \"c7\",\n  \"d7\",\n  \"e7\",\n  \"f7\",\n  \"c3\",\n  \"d3\",\n  \"e3\",\n  \"f3\",\n  \"c6\",\n  \"d6\",\n  \"e6\",\n  \"f6\",\n  \"c4\",\n  \"c5\",\n  \"f4\",\n  \"f5\",\n  \"d4\",\n  \"e4\",\n  \"d5\",\n  \"e5\",\n];\n","import Chess from \"chess.js\";\n\nimport squares from \"./squares.js\";\n\nconst BaseChess = new Chess();\n\nexport const stormTurns = [15, 25, 35, 45];\n\nconst StormChess = function () {\n  // Attributes\n  let stormLevel = 0; // Use this to index stormTurns to find the turns at which the next storm will arrive\n  let gameOver = false;\n  let liveSquares = squares;\n  let zappedSquares = [];\n  let turn = 0;\n\n  // Methods\n  function game_over() {\n    // Returns true if the game has ended via checkmate, stalemate, draw, threefold repetition, or insufficient material. Otherwise, returns false. Must be customised because in_checkmate was customised.\n    return (\n      BaseChess.half_moves >= 100 ||\n      in_checkmate() ||\n      BaseChess.in_stalemate() ||\n      BaseChess.insufficient_material()\n    );\n  }\n\n  function in_checkmate() {\n    // Returns true or false if the side to move has been checkmated. Must be customised because the King's legal moves will be different in Storm Chess.\n    let numLegalMoves = 0;\n    for (let i = 0; i < liveSquares.length; i++) {\n      numLegalMoves += moves(liveSquares[i]).length;\n    }\n    return numLegalMoves === 0;\n  }\n\n  function move({ sourceSquare, targetSquare }) {\n    // Attempts to make a move on the board, returning a move object if the move was legal and null if illegal.\n    // Check the number of turns and wipe rows or columns as necessary, then increment stormLevel\n    var movingSide = BaseChess.turn();\n    var promotionLevel = Math.floor(stormLevel / 2);\n    if (moves(sourceSquare).includes(targetSquare)) {\n      BaseChess.move({ from: sourceSquare, to: targetSquare, promotion: \"q\" });\n      turn += 0.5;\n      if (\n        stormLevel > 1 &&\n        (targetSquare.includes((promotionLevel + 1).toString()) ||\n          targetSquare.includes((8 - promotionLevel).toString()))\n      ) {\n        const piece = BaseChess.get(targetSquare);\n        if (piece && piece.type === \"p\") {\n          BaseChess.remove(targetSquare);\n          BaseChess.put({ type: \"q\", color: movingSide }, targetSquare);\n        }\n      }\n      if (stormTurns.includes(turn)) {\n        zap();\n      }\n      gameOver = game_over();\n    }\n  }\n\n  function moves(square) {\n    // Returns a list of legal moves from the selected square.\n    const stormMoves = [];\n    let playableSquares = liveSquares.slice(); // Must copy the liveSquares array by value rather than reference it\n    if (Math.floor(turn) + 1 === stormTurns[stormLevel]) {\n      let starter = 16 - stormLevel * 4;\n      if (stormLevel >= 2) {\n        starter = 20 - stormLevel * 4;\n      }\n      const nonPlayableSquares = playableSquares.splice(0, starter);\n\n      // Then check if King is in the non playable region\n      if (\n        nonPlayableSquares.some((s) => {\n          const piece = BaseChess.get(s);\n          return (\n            piece && piece.type === \"k\" && piece.color === BaseChess.turn()\n          );\n        })\n      ) {\n        const piece = BaseChess.get(square);\n        if (piece && piece.type !== \"k\") {\n          playableSquares = [];\n        }\n      }\n    }\n\n    const baseMoves = BaseChess.moves({ square: square, verbose: true });\n    for (let baseMove of baseMoves) {\n      if (playableSquares.includes(baseMove.to)) {\n        stormMoves.push(baseMove.to);\n      }\n    }\n    return stormMoves;\n  }\n\n  function zap() {\n    let removeCount = 16 - stormLevel * 4;\n    if (stormLevel >= 2) {\n      removeCount = 20 - stormLevel * 4;\n    }\n    for (let i = 0; i < removeCount; i++) {\n      BaseChess.remove(liveSquares[i]);\n    }\n    zappedSquares.push(...liveSquares.splice(0, removeCount));\n    stormLevel += 1;\n  }\n\n  function status() {\n    return {\n      stormLevel: stormLevel,\n      gameOver: gameOver,\n      liveSquares: liveSquares,\n      zappedSquares: zappedSquares,\n      turn: turn,\n      playerToMove: BaseChess.turn(),\n    };\n  }\n\n  function reset() {\n    BaseChess.reset();\n    stormLevel = 0;\n    gameOver = false;\n    liveSquares = squares;\n    zappedSquares = [];\n    turn = 0;\n  }\n\n  // Public API\n  return {\n    __proto__: BaseChess,\n    move: move,\n    moves: moves,\n    status: status,\n    reset: reset,\n  };\n};\n\nexport default StormChess;\n","import React, { useState, useEffect } from \"react\";\nimport Chessboard from \"chessboardjsx\";\nimport { Flex, BorderBox } from \"@primer/components\";\n\nimport StormChess from \"../logic/StormChess\";\nimport { Panel } from \"../components\";\nimport lightningImage from \"../images/lightning.png\";\n\nconst possibleMoveStyle = {\n  background: \"radial-gradient(circle, #fffc00 36%, transparent 40%)\",\n  borderRadius: \"50%\",\n};\n\nconst zappedSquareStyle = {\n  background: \"#003366\",\n  opacity: \"70%\",\n};\n\nconst lightningSquareStyle = {\n  background: \"#003366\",\n  opacity: \"70%\",\n  backgroundImage: `url(${lightningImage})`,\n  backgroundSize: \"contain\",\n};\n\nconst game = StormChess();\n\nexport default function Board() {\n  const [status, setStatus] = useState(game.status());\n  const [position, setPosition] = useState(\"start\");\n  const [orientation, setOrientation] = useState(\"white\");\n  const [autoFlipOn, setAutoFlipOn] = useState(false);\n  const [possibleMoves, setPossibleMoves] = useState([]);\n  const [lightningSquares, setLightningSquares] = useState([]);\n\n  const squareStyles = {\n    ...Object.fromEntries(\n      possibleMoves.map((possibleMove) => [possibleMove, possibleMoveStyle])\n    ),\n    ...Object.fromEntries(\n      status.zappedSquares.map((zappedSquare) => [\n        zappedSquare,\n        zappedSquareStyle,\n      ])\n    ),\n    ...Object.fromEntries(\n      lightningSquares.map((lightningSquare) => [\n        lightningSquare,\n        lightningSquareStyle,\n      ])\n    ),\n  };\n\n  useEffect(() => {\n    setLightningSquares(status.zappedSquares);\n    setTimeout(() => setLightningSquares([]), 1500);\n  }, [status.stormLevel, status.zappedSquares]);\n\n  const onMouseOverSquare = (square) => {\n    setPossibleMoves(game.moves(square));\n  };\n\n  const onMouseOutSquare = () => {\n    setPossibleMoves([]);\n  };\n\n  const onDrop = ({ sourceSquare, targetSquare }) => {\n    const move = game.move({\n      sourceSquare: sourceSquare,\n      targetSquare: targetSquare,\n    });\n    if (move === null) return;\n    setPosition(game.fen());\n    setStatus(game.status());\n    setPossibleMoves([]);\n    if (autoFlipOn) {\n      setOrientation(game.status().playerToMove === \"b\" ? \"black\" : \"white\");\n    }\n  };\n\n  const resetBoard = () => {\n    game.reset();\n    setPosition(game.fen());\n    setStatus(game.status());\n    setPossibleMoves([]);\n    setLightningSquares([]);\n  };\n\n  return (\n    <Flex flex={1} flexDirection=\"row\" justifyContent=\"center\">\n      <BorderBox>\n        <Chessboard\n          position={position}\n          squareStyles={squareStyles}\n          onMouseOverSquare={onMouseOverSquare}\n          onMouseOutSquare={onMouseOutSquare}\n          onDrop={onDrop}\n          orientation={orientation}\n        />\n      </BorderBox>\n      <Panel\n        status={status}\n        orientation={orientation}\n        setOrientation={setOrientation}\n        autoFlipOn={autoFlipOn}\n        setAutoFlipOn={setAutoFlipOn}\n        resetBoard={resetBoard}\n      />\n    </Flex>\n  );\n}\n","import React from \"react\";\nimport {\n  Flex,\n  BorderBox,\n  Button,\n  ProgressBar,\n  theme,\n} from \"@primer/components\";\n\nimport { stormTurns } from \"../logic/StormChess\";\n\nexport default function Panel({\n  status,\n  orientation,\n  setOrientation,\n  autoFlipOn,\n  setAutoFlipOn,\n  resetBoard,\n}) {\n  const turnsUntilNextStorm =\n    stormTurns[status.stormLevel] - Math.floor(status.turn);\n  const turnsBetweenStorms =\n    stormTurns[status.stormLevel] - (stormTurns[status.stormLevel - 1] || 0);\n  return (\n    <BorderBox width={256} marginX={16} padding={4}>\n      <p>Player to move: {status.playerToMove === \"b\" ? \"Black\" : \"White\"}</p>\n      <p>Turn: {Math.floor(status.turn)}</p>\n      <p>\n        Turns until next storm:{\" \"}\n        {isNaN(turnsUntilNextStorm) ? \"∞\" : turnsUntilNextStorm}\n      </p>\n      <ProgressBar\n        marginBottom={4}\n        progress={(turnsUntilNextStorm * 100) / turnsBetweenStorms}\n        bg={theme.colors.blue}\n      />\n      <Flex justifyContent=\"space-between\" alignItems=\"center\" marginY={4}>\n        <span>Automatic flipping:</span>\n        <input\n          type=\"checkbox\"\n          id=\"autoFlipOn\"\n          name=\"autoFlipOn\"\n          checked={autoFlipOn}\n          onClick={() => setAutoFlipOn(!autoFlipOn)}\n        />\n      </Flex>\n      <Button\n        display=\"block\"\n        marginY={2}\n        width=\"100%\"\n        onClick={() =>\n          setOrientation(orientation === \"white\" ? \"black\" : \"white\")\n        }\n      >\n        Flip board\n      </Button>\n      <Button display=\"block\" marginY={2} width=\"100%\" onClick={resetBoard}>\n        Reset board\n      </Button>\n    </BorderBox>\n  );\n}\n","import React from \"react\";\nimport { BaseStyles, Heading } from \"@primer/components\";\n\nimport { Board } from \"./components\";\n\nfunction App() {\n  return (\n    <BaseStyles>\n      <Heading fontSize={24} margin={4} textAlign=\"center\">\n        Storm Chess\n      </Heading>\n      <Board />\n    </BaseStyles>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}