(this["webpackJsonpstorm-chess"]=this["webpackJsonpstorm-chess"]||[]).push([[0],{29:function(e,t,n){e.exports=n.p+"static/media/lightning.7b2c75a9.png"},34:function(e,t,n){e.exports=n(52)},39:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),i=(n(39),n(8)),u=n(10),s=n(11),l=n(26),f=n.n(l),m=n(30),p=n(27),b=n(28),d=["a1","a2","a3","a4","a5","a6","a7","a8","h1","h2","h3","h4","h5","h6","h7","h8","b1","c1","d1","e1","f1","g1","b8","c8","d8","e8","f8","g8","b2","b3","b4","b5","b6","b7","g2","g3","g4","g5","g6","g7","c2","d2","e2","f2","c7","d7","e7","f7","c3","d3","e3","f3","c6","d6","e6","f6","c4","c5","f4","f5","d4","e4","d5","e5"],g=new(n.n(b).a),v=[15,25,35,45],h=function(){var e=0,t=!1,n=d,a=[],r=0;function o(){return g.half_moves>=100||function(){for(var e=0,t=0;t<n.length;t++)e+=c(n[t]).length;return 0===e}()||g.in_stalemate()||g.insufficient_material()}function c(t){var a=[],o=n.slice();if(Math.floor(r)+1===v[e]){var c=16-4*e;if(e>=2&&(c=20-4*e),o.splice(0,c).some((function(e){var t=g.get(e);return t&&"k"===t.type&&t.color===g.turn()}))){var i=g.get(t);i&&"k"!==i.type&&(o=[])}}var u,s=g.moves({square:t,verbose:!0}),l=Object(p.a)(s);try{for(l.s();!(u=l.n()).done;){var f=u.value;o.includes(f.to)&&a.push(f.to)}}catch(m){l.e(m)}finally{l.f()}return a}return Object(u.a)(Object(u.a)({},g),{},{move:function(i){var u=i.sourceSquare,s=i.targetSquare,l=g.turn(),f=Math.floor(e/2);if(c(u).includes(s)){if(g.move({from:u,to:s,promotion:"q"}),r+=.5,e>1&&(s.includes((f+1).toString())||s.includes((8-f).toString()))){var p=g.get(s);p&&"p"===p.type&&(g.remove(s),g.put({type:"q",color:l},s))}v.includes(r)&&function(){var t,r=16-4*e;e>=2&&(r=20-4*e);for(var o=0;o<r;o++)g.remove(n[o]);(t=a).push.apply(t,Object(m.a)(n.splice(0,r))),e+=1}(),t=o()}},moves:c,status:function(){return{stormLevel:e,gameOver:t,liveSquares:n,zappedSquares:a,turn:r,playerToMove:g.turn()}},reset:function(){g.reset(),e=0,t=!1,n=d,a=[],r=0}})},O=n(29),S={background:"radial-gradient(circle, #fffc00 36%, transparent 40%)",borderRadius:"50%"},j={background:"#003366",opacity:"70%"},E={background:"#003366",opacity:"70%",backgroundImage:"url(".concat(n.n(O).a,")"),backgroundSize:"contain"},k=new h;function y(){var e=Object(a.useState)(k.status()),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)("start"),l=Object(s.a)(c,2),m=l[0],p=l[1],b=Object(a.useState)("white"),d=Object(s.a)(b,2),g=d[0],v=d[1],h=Object(a.useState)(!1),O=Object(s.a)(h,2),y=O[0],q=O[1],M=Object(a.useState)([]),x=Object(s.a)(M,2),F=x[0],z=x[1],B=Object(a.useState)([]),C=Object(s.a)(B,2),T=C[0],L=C[1],A=Object(u.a)(Object(u.a)(Object(u.a)({},Object.fromEntries(F.map((function(e){return[e,S]})))),Object.fromEntries(n.zappedSquares.map((function(e){return[e,j]})))),Object.fromEntries(T.map((function(e){return[e,E]}))));Object(a.useEffect)((function(){L(n.zappedSquares),setTimeout((function(){return L([])}),1500)}),[n.stormLevel,n.zappedSquares]);return r.a.createElement(i.d,{flex:1,flexDirection:"row",justifyContent:"center"},r.a.createElement(i.b,null,r.a.createElement(f.a,{position:m,squareStyles:A,onMouseOverSquare:function(e){z(k.moves(e))},onMouseOutSquare:function(){z([])},onDrop:function(e){var t=e.sourceSquare,n=e.targetSquare;null!==k.move({sourceSquare:t,targetSquare:n})&&(p(k.fen()),o(k.status()),z([]),y&&v("b"===k.status().playerToMove?"black":"white"))},orientation:g})),r.a.createElement(w,{status:n,orientation:g,setOrientation:v,autoFlipOn:y,setAutoFlipOn:q,resetBoard:function(){k.reset(),p(k.fen()),o(k.status()),z([]),L([])}}))}function w(e){var t=e.status,n=e.orientation,a=e.setOrientation,o=e.autoFlipOn,c=e.setAutoFlipOn,u=e.resetBoard,s=v[t.stormLevel]-Math.floor(t.turn),l=v[t.stormLevel]-(v[t.stormLevel-1]||0);return r.a.createElement(i.b,{marginX:16,padding:4},r.a.createElement("p",null,"Player to move: ","b"===t.playerToMove?"Black":"White"),r.a.createElement("p",null,"Turn: ",Math.floor(t.turn)),r.a.createElement("p",null,"Turns until next storm: ",s),r.a.createElement(i.f,{marginBottom:4,progress:100*s/l,bg:i.g.colors.blue}),r.a.createElement(i.d,{justifyContent:"space-between",alignItems:"center",marginY:4},r.a.createElement("span",null,"Automatic flipping:"),r.a.createElement("input",{type:"checkbox",id:"autoFlipOn",name:"autoFlipOn",checked:o,onClick:function(){return c(!o)}})),r.a.createElement(i.c,{display:"block",marginY:2,width:"100%",onClick:function(){return a("white"===n?"black":"white")}},"Flip board"),r.a.createElement(i.c,{display:"block",marginY:2,width:"100%",onClick:u},"Reset board"))}var q=function(){return r.a.createElement(i.a,null,r.a.createElement(i.e,{fontSize:24,margin:4,textAlign:"center"},"Storm Chess"),r.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.911a2621.chunk.js.map